<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checkout - Vintage Treasures</title>
  <style>
    .cart-button-container {
      position: absolute;
      top: 20px;
      left: 20px;
    }

    .nav-button {
      background-color: #8b5a2b;
      color: white;
      padding: 16px 24px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-right: 10px;
    }

    .nav-button:hover {
      background-color: #6a3f1f;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f8f1e4;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #5a4d41;
    }

    .form-container {
      max-width: 500px;
      margin: 20px auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 2px 2px 10px gray;
    }

    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }

    input, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .cart-items {
      margin: 20px auto;
      max-width: 600px;
      padding: 10px;
    }

    .item {
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 10px;
      box-shadow: 1px 1px 5px rgba(0,0,0,0.2);
    }

    .confirm-button {
      background-color: #a67c52;
      color: white;
      padding: 12px;
      border: none;
      width: 100%;
      margin-top: 20px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    .confirm-button:hover {
      background-color: #5a4d41;
    }

    #thankYouMessage {
      display: none;
      text-align: center;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <audio autoplay loop>
  <source src="song.mp3" type="audio/mpeg">
</audio>


  <h1>Checkout</h1>
  <div class="cart-button-container">
    <button class="nav-button" onclick="location.href='MINIPROJECT.html'">Home</button>
    <button class="nav-button" onclick="location.href='details.html'">Products</button>
    <button class="nav-button" onclick="location.href='cart.html'">Back to Cart</button> 
  </div>

  <div class="form-container">
    <label>Name</label>
    <input type="text" id="name" required />

    <label>Email</label>
    <input type="email" id="email" required />

    <label>Address</label>
    <textarea id="address" rows="3" required></textarea>

    <div class="cart-items" id="cartItems">
      <!-- Cart items will be loaded here -->
    </div>

    <h3 id="totalPrice"></h3>

    <button class="confirm-button" onclick="confirmOrder()">Confirm Order</button>
  </div>

  <div id="thankYouMessage">
    <h2>Thank You! Your order has been placed successfullyðŸ©·</h2>
    <button onclick="goBackToHome()" class="nav-button">Keep Shopping</button>
  </div>

  <script>
    function showThankYouMessage() {
      document.querySelector('.form-container').style.display = 'none';
      document.getElementById("thankYouMessage").style.display = "block";
    }

    function goBackToHome() {
      window.location.href = "MINIPROJECT.html";
    }

    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const cartItemsDiv = document.getElementById("cartItems");
    const totalPriceEl = document.getElementById("totalPrice");
    let total = 0;

    cart.forEach(item => {
      const div = document.createElement("div");
      div.className = "item";

      let cleanPrice = parseFloat(String(item.price).replace(/[^0-9.]/g, ""));
      if (isNaN(cleanPrice)) {
        console.warn(`Invalid price for item:`, item);
        cleanPrice = 0;
      }

      div.innerHTML = `<strong>${item.name}</strong> - â‚¹${cleanPrice}`;
      cartItemsDiv.appendChild(div);
      total += cleanPrice;
    });

    totalPriceEl.textContent = "Total Price: â‚¹" + total.toFixed(2);

    function confirmOrder() {
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const address = document.getElementById("address").value;

      if (!name || !email || !address) {
        alert("Please fill all the details!");
        return;
      }

      alert(`Thank you ${name}! Your order has been placed âœ¨.`);
      localStorage.removeItem("cart");
      showThankYouMessage();
    }
  </script>
</body>
</html>
